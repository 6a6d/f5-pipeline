{
  "info": {
    "_postman_id": "7823df97-0b15-44a6-8643-8a77a142f19e",
    "name": "F5 AS3",
    "description": "F5 Application Services Extension (v3)",
    "schema": "https://schema.getpostman.com/json/collection/v2.0.0/collection.json"
  },
  "item": [
    {
      "_postman_id": "1b9cf2db-7050-4a90-b55d-c88e1aaad22e",
      "name": "API Authentication",
      "description": "",
      "item": [
        {
          "_postman_id": "578d3f4a-ebf1-4672-ad0b-b10b03cdcba7",
          "name": "Step 2: Get Authentication Token",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Basic YWRtaW46YWRtaW4="
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"username\":\"admin\",\n    \"password\":\"admin\",\n    \"loginProviderName\":\"tmos\"\n}"
            },
            "url": "https://{{big_ip_a_mgmt}}/mgmt/shared/authn/login"
          },
          "response": []
        },
        {
          "_postman_id": "845a3e0b-cc9e-47cf-a299-55c5369c1437",
          "name": "Setp 3: Verify Authentication Works",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-F5-Auth-Token",
                "value": "{{big_ip_a_auth_token}}"
              }
            ],
            "body": {},
            "url": "https://{{big_ip_a_mgmt}}/mgmt/tm/ltm"
          },
          "response": []
        },
        {
          "_postman_id": "5dba8342-5438-4c4d-9f08-c3a7961d67b7",
          "name": "Step 1-3: Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "897324e4-a182-4521-b81d-e5b069c7ca62",
                "exec": [
                  "pm.test(\"settoken\", function () {\r",
                  "    var jsonData = JSON.parse(responseBody);\r",
                  " \r",
                  "    pm.globals.set(\"TOKEN\", jsonData.state.token);\r",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "X-F5-Auth-Token",
                "value": "{{TOKEN}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"username\":\"admin\",\n    \"password\":\"admin\",\n    \"loginProviderName\":\"tmos\"\n}"
            },
            "url": "https://{{big_ip_a_mgmt}}/mgmt/shared/authn/login"
          },
          "response": []
        },
        {
          "_postman_id": "b7af9c69-7ad2-4a74-92f5-e06c9fff4357",
          "name": "Step 4: Set Authentication Token Timeout",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "X-F5-Auth-Token",
                "value": "{{big_ip_a_auth_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"timeout\":\"36000\"\n}"
            },
            "url": "https://{{big_ip_a_mgmt}}/mgmt/shared/authz/tokens/{{big_ip_a_auth_token}}"
          },
          "response": []
        }
      ]
    },
    {
      "_postman_id": "1cde5587-9144-4da5-ac8c-d93ded190d70",
      "name": "Direct to BIG-IP",
      "description": "",
      "item": [
        {
          "_postman_id": "b2cf8cba-8db9-4060-a349-2a46ddde528a",
          "name": "Create Hackazon App",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "X-F5-Auth-Token",
                "value": "{{big_ip_a_auth_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": " {\n     \"class\": \"AS3\",\n     \"action\": \"deploy\",\n     \"persist\": true,\n     \"declaration\": {\n         \"class\": \"ADC\",\n         \"schemaVersion\": \"3.0.0\",\n         \"id\": \"urn:uuid:33045210-3ab8-4636-9b2a-c98d22ab915d\",\n         \"label\": \"Hackazon\",\n         \"remark\": \"Simple HTTP Service with Round-Robin Load Balancing\",\n         \"Hackazon\": {\n             \"class\": \"Tenant\",\n             \"A1\": {\n                 \"class\": \"Application\",\n                 \"template\": \"http\",\n                 \"serviceMain\": {\n                     \"class\": \"Service_HTTP\",\n                     \"virtualAddresses\": [\n                         \"10.1.1.11\"\n                     ],\n                     \"pool\": \"web_pool\"\n                 },\n                 \"web_pool\": {\n                     \"class\": \"Pool\",\n                     \"monitors\": [\n                         \"http\"\n                     ],\n                     \"members\": [\n                         {\n                             \"servicePort\": 80,\n                             \"serverAddresses\": [\n                                 \"10.2.2.100\"\n                             ]\n                         }\n                     ]\n                 }\n             }\n         }\n     }\n }"
            },
            "url": "https://{{big_ip_a_mgmt}}/mgmt/shared/appsvcs/declare"
          },
          "response": []
        },
        {
          "_postman_id": "8c89ab8a-397c-4d4b-b93f-8f017d7e5084",
          "name": "Create Simple HTTP App",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "X-F5-Auth-Token",
                "value": "{{big_ip_a_auth_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": " {\n     \"class\": \"AS3\",\n     \"action\": \"deploy\",\n     \"persist\": true,\n     \"declaration\": {\n         \"class\": \"ADC\",\n         \"schemaVersion\": \"3.0.0\",\n         \"id\": \"urn:uuid:33045210-3ab8-4636-9b2a-c98d22ab915d\",\n         \"label\": \"Sample 1\",\n         \"remark\": \"Simple HTTP Service with Round-Robin Load Balancing\",\n         \"Sample_HTTP\": {\n             \"class\": \"Tenant\",\n             \"A1\": {\n                 \"class\": \"Application\",\n                 \"template\": \"http\",\n                 \"serviceMain\": {\n                     \"class\": \"Service_HTTP\",\n                     \"virtualAddresses\": [\n                         \"10.0.1.10\"\n                     ],\n                     \"pool\": \"web_pool\"\n                 },\n                 \"web_pool\": {\n                     \"class\": \"Pool\",\n                     \"monitors\": [\n                         \"http\"\n                     ],\n                     \"members\": [\n                         {\n                             \"servicePort\": 80,\n                             \"serverAddresses\": [\n                                 \"192.0.1.10\",\n                                 \"192.0.1.11\"\n                             ]\n                         }\n                     ]\n                 }\n             }\n         }\n     }\n }"
            },
            "url": "https://{{big_ip_a_mgmt}}/mgmt/shared/appsvcs/declare"
          },
          "response": []
        },
        {
          "_postman_id": "51567d1b-ab8a-42cb-80b0-b3ce6a163f7d",
          "name": "Create Simple HTTP App w/ priorityGroup",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "450b43ad-b914-4d93-ae0d-af0adee2977a",
                "exec": [
                  "// tmsh",
                  "// create pool pool_psc_p1_2_443 members add { view-p1-psc3:443 { priority-group 10 } view-p1-psc4:443 { priority-group 1 }} monitor vmware_psc_monitor_TCP load-balancing-mode round-robin"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "X-F5-Auth-Token",
                "value": "{{big_ip_a_auth_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": " {\n     \"class\": \"AS3\",\n     \"action\": \"deploy\",\n     \"persist\": true,\n     \"declaration\": {\n         \"class\": \"ADC\",\n         \"schemaVersion\": \"3.0.0\",\n         \"id\": \"urn:uuid:33045210-3ab8-4636-9b2a-c98d22ab915d\",\n         \"label\": \"Sample 1\",\n         \"remark\": \"Simple HTTP Service with Round-Robin Load Balancing\",\n         \"Sample_HTTP_pg\": {\n             \"class\": \"Tenant\",\n             \"A1\": {\n                 \"class\": \"Application\",\n                 \"template\": \"http\",\n                 \"serviceMain\": {\n                     \"class\": \"Service_HTTP\",\n                     \"virtualAddresses\": [\n                         \"10.0.1.10\"\n                     ],\n                     \"pool\": \"web_pool\"\n                 },\n                 \"web_pool\": {\n                     \"class\": \"Pool\",\n                     \"monitors\": [\n                         \"http\"\n                     ],\n                     \"members\": [\n                         {\n                             \"servicePort\": 80,\n                             \"serverAddresses\": [\n                                 \"192.0.1.10\"\n                             ],\n                             \"priorityGroup\": 10\n                         },\n                         {\n                             \"servicePort\": 80,\n                             \"serverAddresses\": [\n                                 \"192.0.1.11\"\n                             ],\n                             \"priorityGroup\": 20\n                         }\n                     ]\n                 }\n             }\n         }\n     }\n }"
            },
            "url": "https://{{big_ip_a_mgmt}}/mgmt/shared/appsvcs/declare"
          },
          "response": []
        },
        {
          "_postman_id": "091a4785-8bf0-445d-a32c-cacf13ce13f7",
          "name": "Create Simple L4 Serivce",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "450b43ad-b914-4d93-ae0d-af0adee2977a",
                "exec": [
                  "// tmsh",
                  "// create pool pool_psc_p1_2_443 members add { view-p1-psc3:443 { priority-group 10 } view-p1-psc4:443 { priority-group 1 }} monitor vmware_psc_monitor_TCP load-balancing-mode round-robin"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "X-F5-Auth-Token",
                "value": "{{big_ip_a_auth_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"class\": \"AS3\",\n    \"action\": \"deploy\",\n    \"persist\": true,\n    \"declaration\": {\n        \"class\": \"ADC\",\n        \"schemaVersion\": \"3.6.0\",\n        \"id\": \"custom_test\",\n        \"label\": \"custom_test\",\n        \"remark\": \"HTTPS L4 APP\",\n        \"custom_test\": {\n            \"class\": \"Tenant\",\n            \"custom_test_app\": {\n                \"class\": \"Application\",\n                \"template\": \"l4\",\n                \"serviceMain\": {\n                    \"class\": \"Service_L4\",\n                    \"persistenceMethods\": [\n                        {\n                            \"use\": \"custom_test_persistence\"\n                        }\n                    ],\n                    \"virtualPort\": 8283,\n                    \"virtualAddresses\": [\n                        \"10.1.1.1\"\n                    ],\n                    \"layer4\": \"tcp\",\n                    \"profileL4\": {\n                        \"use\": \"custom_test_fastL4_tcp\"\n                    },\n                    \"pool\": \"custom_test_pool\",\n                    \"snat\": {\n                        \"bigip\": \"/Common/SNAT-POOL\"\n                    }\n                },\n                \"custom_test_persistence\": {\n                    \"class\": \"Persist\",\n                    \"persistenceMethod\": \"source-address\",\n                    \"duration\": 1800\n                },\n                \"custom_test_fastL4_tcp\": {\n                    \"class\": \"L4_Profile\",\n                    \"idleTimeout\": 300,\n                    \"looseClose\": true,\n                    \"looseInitialization\": true,\n                    \"resetOnTimeout\": false,\n                    \"tcpCloseTimeout\": 30,\n                    \"tcpHandshakeTimeout\": 30\n                },\n                \"custom_test_pool\": {\n                    \"class\": \"Pool\",\n                    \"loadBalancingMode\": \"round-robin\",\n                    \"slowRampTime\": 300,\n                    \"monitors\": [\n                        {\n                            \"use\": \"custom_test_mon\"\n                        }\n                    ],\n                    \"minimumMembersActive\": 1,\n                    \"members\": [\n                        {\n                            \"servicePort\": 8283,\n                            \"serverAddresses\": [\n                                \"10.2.2.2\"\n                            ],\n                            \"priorityGroup\": 200\n                        },\n                        {\n                            \"servicePort\": 8283,\n                            \"serverAddresses\": [\n                                \"10.2.2.3\"\n                            ],\n                            \"priorityGroup\": 100\n                        }\n                    ]\n                },\n                \"custom_test_mon\": {\n                    \"class\": \"Monitor\",\n                    \"monitorType\": \"https\",\n                    \"send\": \"HEAD / HTTP/1.0rnrn\",\n                    \"receive\": \"HTTP/1.\",\n                    \"interval\": 3,\n                    \"timeout\": 10\n                }\n            }\n        }\n    }\n}"
            },
            "url": "https://{{big_ip_a_mgmt}}/mgmt/shared/appsvcs/declare"
          },
          "response": []
        },
        {
          "_postman_id": "ea2735f9-8700-4320-b78a-9f7c953c1310",
          "name": "Delete one AS3 Application",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "X-F5-Auth-Token",
                "value": "{{big_ip_a_auth_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": "https://{{big_ip_a_mgmt}}/mgmt/shared/appsvcs/declare/Hackazon"
          },
          "response": []
        },
        {
          "_postman_id": "1a56da6a-e15d-429b-8b9d-19eae74682fe",
          "name": "Delete all AS3 Applications",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "X-F5-Auth-Token",
                "value": "{{big_ip_a_auth_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": "https://{{big_ip_a_mgmt}}/mgmt/shared/appsvcs/declare"
          },
          "response": []
        }
      ],
      "event": [
        {
          "listen": "prerequest",
          "script": {
            "id": "23b27837-4467-4f40-9179-c6b47e918ba4",
            "type": "text/javascript",
            "exec": [
              ""
            ]
          }
        },
        {
          "listen": "test",
          "script": {
            "id": "87de0d0b-0bef-460d-a8fd-c24d11c30d31",
            "type": "text/javascript",
            "exec": [
              ""
            ]
          }
        }
      ]
    },
    {
      "_postman_id": "d519a017-8671-428c-b06a-c1b58781ecd5",
      "name": "API Services Gateway",
      "description": "",
      "item": [
        {
          "_postman_id": "f832a7da-daee-49b9-9504-7865345f1085",
          "name": "Test container",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "disabled": false
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"class\": \"AS3\",\n  \"action\": \"deploy\",\n  \"targetHost\": \"192.168.1.127\",\n  \"targetUsername\": \"admin\",\n  \"targetPassphrase\": \"admin\",\n  \"declaration\": {\n    \"class\": \"ADC\",\n    \"schemaVersion\": \"3.0.0\",\n    \"id\": \"container\",\n    \"label\": \"Sample 1 in a container\",\n    \"remark\": \"Simple HTTP application with RR pool\",\n    \"Sample_container\": {\n      \"class\": \"Tenant\",\n      \"A1\": {\n        \"class\": \"Application\",\n        \"template\": \"http\",\n        \"serviceMain\": {\n          \"class\": \"Service_HTTP\",\n          \"virtualAddresses\": [\n            \"10.0.1.10\"\n          ],\n          \"pool\": \"web_pool\"\n        },\n        \"web_pool\": {\n          \"class\": \"Pool\",\n          \"monitors\": [\n            \"http\"\n          ],\n          \"members\": [\n            {\n              \"servicePort\": 80,\n              \"serverAddresses\": [\n                \"192.0.1.10\",\n                \"192.0.1.11\"\n              ]\n            }\n          ]\n        }\n      }\n    }\n  }\n}"
            },
            "url": "https://localhost:8443/mgmt/shared/appsvcs/info"
          },
          "response": []
        },
        {
          "_postman_id": "86b4f407-47ff-426a-8617-c4bf01b58c1b",
          "name": "HTTP app",
          "request": {
            "method": "POST",
            "header": [
              {
                "disabled": false,
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"class\": \"AS3\",\n  \"action\": \"deploy\",\n  \"targetHost\": \"{{big_ip_a_mgmt}}\",\n  \"targetUsername\": \"admin\",\n  \"targetPassphrase\": \"admin\",\n  \"declaration\": {\n    \"class\": \"ADC\",\n    \"schemaVersion\": \"3.0.0\",\n    \"id\": \"container\",\n    \"label\": \"Sample 1\",\n    \"remark\": \"Simple HTTP application with RR pool\",\n    \"Sample_01\": {\n      \"class\": \"Tenant\",\n      \"A1\": {\n        \"class\": \"Application\",\n        \"template\": \"http\",\n        \"serviceMain\": {\n          \"class\": \"Service_HTTP\",\n          \"virtualAddresses\": [\n            \"10.0.1.10\"\n          ],\n          \"pool\": \"web_pool\"\n        },\n        \"web_pool\": {\n          \"class\": \"Pool\",\n          \"monitors\": [\n            \"http\"\n          ],\n          \"members\": [\n            {\n              \"servicePort\": 80,\n              \"serverAddresses\": [\n                \"192.0.1.10\",\n                \"192.0.1.11\"\n              ]\n            }\n          ]\n        }\n      }\n    }\n  }\n}"
            },
            "url": "https://localhost:8443/mgmt/shared/appsvcs/declare"
          },
          "response": []
        },
        {
          "_postman_id": "3c422fa6-8fcd-409f-aa21-a6c25fbf873a",
          "name": "HTTPS app",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"class\": \"AS3\",\n  \"action\": \"deploy\",\n  \"targetHost\": \"{{big_ip_a_mgmt}}\",\n  \"targetUsername\": \"admin\",\n  \"targetPassphrase\": \"admin\",\n  \"declaration\": {\n    \"class\": \"ADC\",\n    \"schemaVersion\": \"3.0.0\",\n    \"id\": \"container\",\n    \"label\": \"Sample 2\",\n    \"remark\": \"HTTPS with predictive-node pool\",\n    \"Sample_02\": {\n      \"class\": \"Tenant\",\n      \"A1\": {\n        \"class\": \"Application\",\n        \"template\": \"https\",\n        \"serviceMain\": {\n          \"class\": \"Service_HTTPS\",\n          \"virtualAddresses\": [\n            \"192.0.2.11\"\n          ],\n          \"pool\": \"web_pool\",\n          \"serverTLS\": \"webtls\"\n        },\n        \"web_pool\": {\n          \"class\": \"Pool\",\n          \"loadBalancingMode\": \"predictive-node\",\n          \"monitors\": [\n            \"http\"\n          ],\n          \"members\": [\n            {\n              \"servicePort\": 80,\n              \"serverAddresses\": [\n                \"192.0.2.12\",\n                \"192.0.2.13\"\n              ]\n            }\n          ]\n        },\n        \"webtls\": {\n          \"class\": \"TLS_Server\",\n          \"certificates\": [\n            {\n              \"certificate\": \"webcert\"\n            }\n          ]\n        },\n        \"webcert\": {\n          \"class\": \"Certificate\",\n          \"remark\": \"in practice we recommend using a passphrase\",\n          \"certificate\": \"-----BEGIN CERTIFICATE-----\\nMIICnDCCAgWgAwIBAgIJAJ5n2b0OCEjwMA0GCSqGSIb3DQEBCwUAMGcxCzAJBgNVBAYTAlVTMRMwEQYDVQQIDApXYXNoaW5ndG9uMRAwDgYDVQQHDAdTZWF0dGxlMRQwEgYDVQQKDAtmNV9OZXR3b3JrczEbMBkGA1UEAwwSc2FtcGxlLmV4YW1wbGUubmV0MB4XDTE3MTEyNjE5NTAyNFoXDTE4MDIyNTE5NTAyNFowZzELMAkGA1UEBhMCVVMxEzARBgNVBAgMCldhc2hpbmd0b24xEDAOBgNVBAcMB1NlYXR0bGUxFDASBgNVBAoMC2Y1X05ldHdvcmtzMRswGQYDVQQDDBJzYW1wbGUuZXhhbXBsZS5uZXQwgZ8wDQYJKoZIhvcNAQEBBQADgY0AMIGJAoGBALEsuXmSXVQpYjrZPW+WiTBjn491mwZYT7Q92V1HlSBtM6WdWlK1aZN5sovfKtOX7Yrm8xa+e4o/zJ2QYLyyv5O+t2EGN/4qUEjEAPY9mwJdfzRQy6Hyzm84J0QkTuUJ/EjNuPji3D0QJRALUTzu1UqqDCEtiN9OGyXEkh7uvb7BAgMBAAGjUDBOMB0GA1UdDgQWBBSVHPNrGWrjWyZvckQxFYWO59FRFjAfBgNVHSMEGDAWgBSVHPNrGWrjWyZvckQxFYWO59FRFjAMBgNVHRMEBTADAQH/MA0GCSqGSIb3DQEBCwUAA4GBAJeJ9SEckEwPhkXOm+IuqfbUS/RcziifBCTmVyE+Fa/j9pKSYTgiEBNdbJeBEa+gPMlQtbV7Y2dy8TKx/8axVBHiXC5geDML7caxOrAyHYBpnx690xJTh5OIORBBM/a/NvaR+P3CoVebr/NPRh9oRNxnntnqvqD7SW0U3ZPe3tJc\\n-----END CERTIFICATE-----\",\n          \"privateKey\": \"-----BEGIN RSA PRIVATE KEY-----\\nProc-Type: 4,ENCRYPTED\\nDEK-Info: AES-256-CBC,D8FFCE6B255601587CB54EC29B737D31\\n\\nkv4Fc3Jn0Ujkj0yRjt+gQQfBLSNF2aRLUENXnlr7Xpzqu0Ahr3jS1bAAnd8IWnsR\\nyILqVmKsYF2DoHh0tWiEAQ7/y/fe5DTFhK7N4Wml6kp2yVMkP6KC4ssyYPw27kjK\\nDBwBZ5O8Ioej08A5sgsLCmglbmtSPHJUn14pQnMTmLOpEtOsu6S+2ibPgSNpdg0b\\nCAJNG/KHe+Vkx59qNDyDeKb7FZOlsX30+y67zUq9GQqJEDuysPJ2BUNP0IJXAjst\\nFIt1qNoZew+5KDYs7u/lPxcMGTirUhgI84Jy4WcDvSOsP/tKlxj04TbIE3epmSKy\\n+TihHkwY7ngIGtcm3Sfqk5jz2RXoj1/Ac3SW8kVTYaOUogBhn7zAq4Wju6Et4hQG\\nRGapsJp1aCeZ/a4RCDTxspcKoMaRa97/URQb0hBRGx3DGUhzpmX9zl7JI2Xa5D3R\\nmdBXtjLKYJTdIMdd27prBEKhMUpae2rz5Mw4J907wZeBq/wu+zp8LAnecfTe2nGY\\nE32x1U7gSEdYOGqnwxsOexb1jKgCa67Nw9TmcMPV8zmH7R9qdvgxAbAtwBl1F9OS\\nfcGaC7epf1AjJLtaX7krWmzgASHl28Ynh9lmGMdv+5QYMZvKG0LOg/n3m8uJ6sKy\\nIzzvaJswwn0j5P5+czyoV5CvvdCfKnNb+3jUEN8I0PPwjBGKr4B1ojwhogTM248V\\nHR69D6TxFVMfGpyJhCPkbGEGbpEpcffpgKuC/mEtMqyDQXJNaV5HO6HgAJ9F1P6v\\n5ehHHTMRvzCCFiwndHdlMXUjqSNjww6me6dr6LiAPbejdzhL2vWx1YqebOcwQx3G\\n-----END RSA PRIVATE KEY-----\",\n          \"passphrase\": {\n            \"ciphertext\": \"ZjVmNQ==\",\n            \"protected\": \"eyJhbGciOiJkaXIiLCJlbmMiOiJub25lIn0\"\n          }\n        }\n      }\n    }\n  }\n}"
            },
            "url": "https://localhost:8443/mgmt/shared/appsvcs/declare"
          },
          "response": []
        },
        {
          "_postman_id": "87058716-636c-41ea-ae95-e8d4d2194138",
          "name": "TCP virtual server to ICAP with custom monitor",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"class\": \"AS3\",\n  \"action\": \"deploy\",\n  \"targetHost\": \"{{big_ip_a_mgmt}}\",\n  \"targetUsername\": \"admin\",\n  \"targetPassphrase\": \"admin\",\n  \"declaration\": {\n    \"class\": \"ADC\",\n    \"schemaVersion\": \"3.0.0\",\n    \"id\": \"container\",\n    \"label\": \"Sample 3\",\n    \"remark\": \"TCP load-balanced to ICAP with custom monitor\",\n    \"Sample_03\": {\n      \"class\": \"Tenant\",\n      \"A1\": {\n        \"class\": \"Application\",\n        \"template\": \"tcp\",\n        \"serviceMain\": {\n          \"class\": \"Service_TCP\",\n          \"virtualAddresses\": [\n            \"10.0.5.10\"\n          ],\n          \"virtualPort\": 1344,\n          \"pool\": \"svc_pool\"\n        },\n        \"svc_pool\": {\n          \"class\": \"Pool\",\n          \"monitors\": [\n            {\n              \"use\": \"icap_monitor\"\n            }\n          ],\n          \"members\": [\n            {\n              \"servicePort\": 1344,\n              \"serverAddresses\": [\n                \"192.0.5.10\",\n                \"192.0.5.11\"\n              ]\n            }\n          ]\n        },\n        \"icap_monitor\": {\n          \"class\": \"Monitor\",\n          \"monitorType\": \"tcp\",\n          \"send\": \"OPTIONS icap://icap.example.net/ ICAP/1.0\\r\\nUser-Agent: f5-ADC\\r\\n\\r\\n\",\n          \"receive\": \"ICAP/1.0 200 OK\",\n          \"adaptive\": false\n        }\n      }\n    }\n  }\n}"
            },
            "url": "https://localhost:8443/mgmt/shared/appsvcs/declare"
          },
          "response": []
        },
        {
          "_postman_id": "d1cef35e-1535-4fbe-a8ac-52c80a82bb66",
          "name": "Delete AS3 application copy",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "X-F5-Auth-Token",
                "value": "{{big_ip_a_auth_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": "https://localhost:8443/mgmt/shared/appsvcs/declare/Sample_container"
          },
          "response": []
        }
      ],
      "event": [
        {
          "listen": "prerequest",
          "script": {
            "id": "7524e90c-917b-46f1-b649-2f51c0b978b5",
            "type": "text/javascript",
            "exec": [
              ""
            ]
          }
        },
        {
          "listen": "test",
          "script": {
            "id": "8c54c561-ff2d-4092-b2f3-8d1e01eebfc6",
            "type": "text/javascript",
            "exec": [
              ""
            ]
          }
        }
      ]
    },
    {
      "_postman_id": "0aa1e39e-42bb-48ee-a903-401c050647ce",
      "name": "BIG-IQ v6.1",
      "description": "",
      "item": [
        {
          "_postman_id": "49bc3379-eb4b-4355-af05-b8ec5bfc0d72",
          "name": "Get BIG-IQ auth token",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "897324e4-a182-4521-b81d-e5b069c7ca62",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "pm.globals.set(\"TOKEN\", jsonData.token.token);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "X-F5-Auth-Token",
                "type": "text",
                "value": "{{TOKEN}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n  \"username\": \"admin\",\r\n  \"password\": \"admin\",\r\n  \"loginProviderName\": \"tmos\"\r\n}"
            },
            "url": "https://{{big_iq_mgmt}}/mgmt/shared/authn/login"
          },
          "response": []
        },
        {
          "_postman_id": "f372f407-b3ba-44a3-a7af-514c658d6142",
          "name": "Create App",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "300904c1-4c62-455a-8090-af831f839cd5",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "pm.globals.set(\"ID\", jsonData.id);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "value": "application/json",
                "type": "text"
              },
              {
                "key": "X-F5-Auth-Token",
                "value": "{{TOKEN}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"class\": \"AS3\",\n    \"action\": \"deploy\",\n    \"persist\": true,\n    \"declaration\": {\n        \"class\": \"ADC\",\n        \"schemaVersion\": \"3.6.0\",\n        \"id\": \"example-declaration-01\",\n        \"label\": \"Task1\",\n        \"remark\": \"Task 1 - HTTP Application Service\",\n        \"target\": {\n            \"hostname\": \"{{big_ip_a_mgmt}}\"\n        },\n        \"Task1\": {\n            \"class\": \"Tenant\",\n            \"MyWebApp1\": {\n                \"class\": \"Application\",\n                \"template\": \"http\",\n                \"statsProfile\": {\n                    \"class\": \"Analytics_Profile\",\n                    \"collectedStatsInternalLogging\": true,\n                    \"collectedStatsExternalLogging\": false,\n                    \"capturedTrafficInternalLogging\": false,\n                    \"capturedTrafficExternalLogging\": true,\n                    \"collectPageLoadTime\": true,\n                    \"collectClientSideStatistics\": true,\n                    \"collectResponseCode\": true,\n                    \"sessionCookieSecurity\": \"ssl-only\"\n                },\n                \"serviceMain\": {\n                    \"class\": \"Service_HTTP\",\n                    \"virtualAddresses\": [\n                        \"10.1.20.100\"\n                    ],\n                    \"pool\": \"web_pool\",\n                    \"profileAnalytics\": {\n                        \"use\": \"statsProfile\"\n                    }\n                },\n                \"web_pool\": {\n                    \"class\": \"Pool\",\n                    \"monitors\": [\n                        \"http\"\n                    ],\n                    \"members\": [\n                        {\n                            \"servicePort\": 80,\n                            \"serverAddresses\": [\n                                \"10.1.10.100\",\n                                \"10.1.10.101\"\n                            ]\n                        }\n                    ]\n                }\n            }\n        }\n    }\n}"
            },
            "url": {
              "raw": "https://{{big_iq_mgmt}}/mgmt/shared/appsvcs/declare?async=true",
              "protocol": "https",
              "host": [
                "{{big_iq_mgmt}}"
              ],
              "path": [
                "mgmt",
                "shared",
                "appsvcs",
                "declare"
              ],
              "query": [
                {
                  "key": "async",
                  "value": "true",
                  "equals": true
                }
              ]
            }
          },
          "response": []
        },
        {
          "_postman_id": "8d79b984-36ee-45af-a10f-40e1ed50ff06",
          "name": "Create HTTPS Offload App",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "300904c1-4c62-455a-8090-af831f839cd5",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "pm.globals.set(\"ID\", jsonData.id);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "type": "text",
                "value": "application/json"
              },
              {
                "key": "X-F5-Auth-Token",
                "type": "text",
                "value": "{{TOKEN}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"class\": \"AS3\",\n    \"action\": \"deploy\",\n    \"persist\": true,\n    \"declaration\": {\n        \"class\": \"ADC\",\n        \"schemaVersion\": \"3.7.0\",\n        \"id\": \"isc-lab\",\n        \"label\": \"Task2\",\n        \"remark\": \"Task 2 - HTTPS Application Service\",\n        \"target\": {\n            \"hostname\": \"{{big_ip_a_mgmt}}\"\n        },\n        \"Task2\": {\n            \"class\": \"Tenant\",\n            \"MyWebApp2\": {\n                \"class\": \"Application\",\n                \"template\": \"https\",\n                \"statsProfile\": {\n                    \"class\": \"Analytics_Profile\",\n                    \"collectedStatsInternalLogging\": true,\n                    \"collectedStatsExternalLogging\": false,\n                    \"capturedTrafficInternalLogging\": false,\n                    \"capturedTrafficExternalLogging\": true,\n                    \"collectPageLoadTime\": true,\n                    \"collectClientSideStatistics\": true,\n                    \"collectResponseCode\": true,\n                    \"sessionCookieSecurity\": \"ssl-only\"\n                },\n                \"serviceMain\": {\n                    \"class\": \"Service_HTTPS\",\n                    \"virtualAddresses\": [\n                        \"10.1.20.101\"\n                    ],\n                    \"pool\": \"web_pool\",\n                    \"profileAnalytics\": {\n                        \"use\": \"statsProfile\"\n                    },\n                    \"serverTLS\": \"webtls\"\n                },\n                \"web_pool\": {\n                    \"class\": \"Pool\",\n                    \"monitors\": [\n                        \"http\"\n                    ],\n                    \"members\": [\n                        {\n                            \"servicePort\": 80,\n                            \"serverAddresses\": [\n                                \"10.1.10.102\",\n                                \"10.1.10.103\"\n                            ]\n                        }\n                    ]\n                },\n                \"webtls\": {\n                    \"class\": \"TLS_Server\",\n                    \"certificates\": [\n                        {\n                            \"certificate\": \"webcert\"\n                        }\n                    ]\n                },\n                \"webcert\": {\n                    \"class\": \"Certificate\",\n                    \"certificate\": {\n                        \"bigip\": \"/Common/default.crt\"\n                    },\n                    \"privateKey\": {\n                        \"bigip\": \"/Common/default.key\"\n                    }\n                }\n            }\n        }\n    }\n}"
            },
            "url": {
              "raw": "https://{{big_iq_mgmt}}/mgmt/shared/appsvcs/declare?async=true",
              "protocol": "https",
              "host": [
                "{{big_iq_mgmt}}"
              ],
              "path": [
                "mgmt",
                "shared",
                "appsvcs",
                "declare"
              ],
              "query": [
                {
                  "key": "async",
                  "value": "true",
                  "equals": true
                }
              ]
            }
          },
          "response": []
        },
        {
          "_postman_id": "fe7f7778-f95d-481e-a01a-7d77a738afe2",
          "name": "Create App with WAF",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "300904c1-4c62-455a-8090-af831f839cd5",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "pm.globals.set(\"ID\", jsonData.id);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "type": "text",
                "value": "application/json"
              },
              {
                "key": "X-F5-Auth-Token",
                "type": "text",
                "value": "{{TOKEN}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"class\": \"AS3\",\n    \"action\": \"deploy\",\n    \"persist\": true,\n    \"declaration\": {\n        \"class\": \"ADC\",\n        \"schemaVersion\": \"3.7.0\",\n        \"id\": \"isc-lab\",\n        \"label\": \"Task3\",\n        \"remark\": \"Task 3 - HTTPS Application with WAF\",\n        \"target\": {\n            \"hostname\": \"{{big_ip_a_mgmt}}\"\n        },\n        \"Task3\": {\n            \"class\": \"Tenant\",\n            \"MyWebApp3\": {\n                \"class\": \"Application\",\n                \"template\": \"https\",\n                \"statsProfile\": {\n                    \"class\": \"Analytics_Profile\",\n                    \"collectedStatsInternalLogging\": true,\n                    \"collectedStatsExternalLogging\": false,\n                    \"capturedTrafficInternalLogging\": false,\n                    \"capturedTrafficExternalLogging\": true,\n                    \"collectPageLoadTime\": true,\n                    \"collectClientSideStatistics\": true,\n                    \"collectResponseCode\": true,\n                    \"sessionCookieSecurity\": \"ssl-only\"\n                },\n                \"serviceMain\": {\n                    \"class\": \"Service_HTTPS\",\n                    \"virtualAddresses\": [\n                        \"10.1.20.102\"\n                    ],\n                    \"pool\": \"web_pool\",\n                    \"profileAnalytics\": {\n                        \"use\": \"statsProfile\"\n                    },\n                    \"serverTLS\": \"webtls\",\n                    \"policyWAF\": {\n                        \"bigip\": \"/Common/linux-high\"\n                    }\n                },\n                \"web_pool\": {\n                    \"class\": \"Pool\",\n                    \"monitors\": [\n                        \"http\"\n                    ],\n                    \"members\": [\n                        {\n                            \"servicePort\": 80,\n                            \"serverAddresses\": [\n                                \"10.1.10.104\",\n                                \"10.1.10.105\"\n                            ]\n                        }\n                    ]\n                },\n                \"webtls\": {\n                    \"class\": \"TLS_Server\",\n                    \"certificates\": [\n                        {\n                            \"certificate\": \"webcert\"\n                        }\n                    ]\n                },\n                \"webcert\": {\n                    \"class\": \"Certificate\",\n                    \"certificate\": {\n                        \"bigip\": \"/Common/default.crt\"\n                    },\n                    \"privateKey\": {\n                        \"bigip\": \"/Common/default.key\"\n                    }\n                }\n            }\n        }\n    }\n}"
            },
            "url": {
              "raw": "https://{{big_iq_mgmt}}/mgmt/shared/appsvcs/declare?async=true",
              "protocol": "https",
              "host": [
                "{{big_iq_mgmt}}"
              ],
              "path": [
                "mgmt",
                "shared",
                "appsvcs",
                "declare"
              ],
              "query": [
                {
                  "key": "async",
                  "value": "true",
                  "equals": true
                }
              ]
            }
          },
          "response": []
        },
        {
          "_postman_id": "e4d281b9-1f19-431e-aa63-417f9284bab2",
          "name": "Create Generic App",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "300904c1-4c62-455a-8090-af831f839cd5",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "pm.globals.set(\"ID\", jsonData.id);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "type": "text",
                "value": "application/json"
              },
              {
                "key": "X-F5-Auth-Token",
                "type": "text",
                "value": "{{TOKEN}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"class\": \"AS3\",\n    \"action\": \"deploy\",\n    \"persist\": true,\n    \"declaration\": {\n        \"class\": \"ADC\",\n        \"schemaVersion\": \"3.7.0\",\n        \"id\": \"isc-lab\",\n        \"label\": \"Task4\",\n        \"remark\": \"Task 4 - Generic Services\",\n        \"target\": {\n            \"hostname\": \"{{big_ip_a_mgmt}}\"\n        },\n        \"Task4\": {\n            \"class\": \"Tenant\",\n            \"MyWebApp4\": {\n                \"class\": \"Application\",\n                \"template\": \"generic\",\n                \"statsProfile\": {\n                    \"class\": \"Analytics_Profile\",\n                    \"collectedStatsInternalLogging\": true,\n                    \"collectedStatsExternalLogging\": false,\n                    \"capturedTrafficInternalLogging\": false,\n                    \"capturedTrafficExternalLogging\": true,\n                    \"collectPageLoadTime\": true,\n                    \"collectClientSideStatistics\": true,\n                    \"collectResponseCode\": true,\n                    \"sessionCookieSecurity\": \"ssl-only\"\n                },\n                \"generic\": {\n                    \"class\": \"Service_Generic\",\n                    \"virtualAddresses\": [\n                        \"10.1.20.103\"\n                    ],\n                    \"virtualPort\": 8080,\n                    \"pool\": \"web_pool\",\n                    \"profileAnalytics\": {\n                        \"use\": \"statsProfile\"\n                    }\n                },\n                \"web_pool\": {\n                    \"class\": \"Pool\",\n                    \"monitors\": [\n                        \"tcp\"\n                    ],\n                    \"members\": [\n                        {\n                            \"servicePort\": 80,\n                            \"serverAddresses\": [\n                                \"10.1.10.106\",\n                                \"10.1.10.107\"\n                            ]\n                        }\n                    ]\n                }\n            }\n        }\n    }\n}"
            },
            "url": {
              "raw": "https://{{big_iq_mgmt}}/mgmt/shared/appsvcs/declare?async=true",
              "protocol": "https",
              "host": [
                "{{big_iq_mgmt}}"
              ],
              "path": [
                "mgmt",
                "shared",
                "appsvcs",
                "declare"
              ],
              "query": [
                {
                  "key": "async",
                  "value": "true",
                  "equals": true
                }
              ]
            }
          },
          "response": []
        },
        {
          "_postman_id": "fb2440be-e853-4fff-9ecd-d34775e8212b",
          "name": "Check AS3 Deployment",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              },
              {
                "key": "X-F5-Auth-Token",
                "value": "{{TOKEN}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": "https://{{big_iq_mgmt}}/mgmt/shared/appsvcs/task/{{ID}}"
          },
          "response": []
        },
        {
          "_postman_id": "e6e6af9a-7923-4b11-8205-88ef304009ea",
          "name": "Check AS3 App Service",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "type": "text",
                "value": "application/json"
              },
              {
                "key": "X-F5-Auth-Token",
                "type": "text",
                "value": "{{TOKEN}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": "https://{{big_iq_mgmt}}/mgmt/cm/global/tasks/deploy-app-service"
          },
          "response": []
        },
        {
          "_postman_id": "316f8357-fb0a-430b-93b0-a8aade538d2b",
          "name": "Create AS3 Template",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "300904c1-4c62-455a-8090-af831f839cd5",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "value": "application/json",
                "type": "text"
              },
              {
                "key": "X-F5-Auth-Token",
                "value": "{{TOKEN}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n     \"description\": \"\",\n     \"name\": \"HTTPcustomTemplateTask6\",\n     \"schemaOverlay\": {\n         \"type\": \"object\",\n         \"properties\": {\n             \"class\": {},\n             \"updateMode\": {},\n             \"schemaVersion\": {},\n             \"id\": {},\n             \"label\": {},\n             \"remark\": {},\n             \"constants\": {},\n             \"Common\": {},\n             \"controls\": {},\n             \"scratch\": {}\n         },\n         \"required\": [\n             \"class\"\n         ],\n         \"definitions\": {\n             \"Pool\": {\n                 \"loadBalancingMode\": {\n                     \"type\": \"string\",\n                     \"default\": \"round-robin\"\n                 },\n                 \"monitors\": {\n                     \"type\": \"array\"\n                 },\n                 \"members\": {\n                     \"type\": \"array\"\n                 }\n             },\n             \"Service_HTTP\": {\n                 \"virtualPort\": {\n                     \"type\": \"integer\",\n                     \"default\": 8080,\n                     \"const\": 8080\n                 },\n                 \"virtualAddresses\": {\n                     \"type\": \"array\"\n                 }\n             }\n         }\n     }\n }"
            },
            "url": "https://{{big_iq_mgmt}}/mgmt/cm/global/appsvcs-templates"
          },
          "response": []
        },
        {
          "_postman_id": "5fa57597-559c-4750-8d84-aa058947a70a",
          "name": "Delete AS3 App",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "X-F5-Auth-Token",
                "value": "{{TOKEN}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"class\": \"AS3\",\n    \"action\": \"deploy\",\n    \"persist\": true,\n    \"declaration\": {\n        \"class\": \"ADC\",\n        \"schemaVersion\": \"3.6.0\",\n        \"id\": \"example-declaration-01\",\n        \"label\": \"Task1\",\n        \"remark\": \"Task 1 - HTTP Application Service\",\n        \"target\": {\n            \"hostname\": \"{{big_ip_a_mgmt}}\"\n        },\n        \"Task1\": {\n        \t\"class\": \"Tenant\"\n        }\n    }\n}"
            },
            "url": {
              "raw": "https://{{big_iq_mgmt}}/mgmt/shared/appsvcs/declare?async=true",
              "protocol": "https",
              "host": [
                "{{big_iq_mgmt}}"
              ],
              "path": [
                "mgmt",
                "shared",
                "appsvcs",
                "declare"
              ],
              "query": [
                {
                  "key": "async",
                  "value": "true",
                  "equals": true
                }
              ]
            }
          },
          "response": []
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "id": "3b82b5b1-9904-4957-aeac-d2370a2200cb",
        "type": "text/javascript",
        "exec": [
          ""
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "id": "01b85987-8758-4508-a47f-a5b39ea90f5c",
        "type": "text/javascript",
        "exec": [
          ""
        ]
      }
    }
  ]
}